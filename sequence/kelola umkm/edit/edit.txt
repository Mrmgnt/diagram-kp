@startuml
!theme materia

title Sequence Diagram - Edit Data UMKM (Pola MVC)
hide footbox

actor "Pengelola" as Pengguna
boundary "View" as View
control "Controller" as Controller
entity "Model" as Model

Pengguna -> View: Memilih UMKM & klik tombol "Edit"
activate View

View -> Controller: Minta data UMKM untuk diedit (berdasarkan ID)
activate Controller

Controller -> Model: Panggil fungsi getDataUMKM(ID)
activate Model

Model -> Model: Mengambil data UMKM dari database
Model --> Controller: Mengembalikan data UMKM
deactivate Model

Controller --> View: Meneruskan data UMKM ke View
deactivate Controller

View --> Pengguna: Menampilkan form dengan data UMKM yang telah terisi
deactivate View

Pengguna -> View: Mengubah data pada form & klik "Update"
activate View

View -> Controller: Meneruskan data UMKM yang telah diubah
activate Controller

Controller -> Model: Panggil fungsi validasi(data_umkm_diubah)
activate Model
Model -> Model: Melakukan validasi data form
Model --> Controller: Mengembalikan hasil validasi (valid / tidak valid)
deactivate Model

alt Data Valid
    Controller -> Model: Panggil fungsi updateDataUMKM(data_umkm_diubah)
    activate Model
    Model -> Model: Memperbarui data UMKM di database
    Model --> Controller: Konfirmasi data telah diperbarui
    deactivate Model
    
    Controller --> View: Respon sukses
    deactivate Controller
    
    View --> Pengguna: Notifikasi "Data berhasil diperbarui" & kembali ke halaman daftar
    deactivate View
else Data Tidak Valid
    Controller --> View: Respon gagal dengan pesan error validasi
    deactivate Controller
    
    View --> Pengguna: Menampilkan pesan error di form edit
    deactivate View
end

@enduml