@startuml
!theme materia

title Sequence Diagram - Tambah Data UMKM (Pola MVC)
hide footbox

actor "Pengelola bumn" as Pengguna
boundary "Halaman_kelola_UMKM" as Halaman_kelola_UMKM
control "Controller" as Controller
entity "Entity" as Entity

Pengguna -> Halaman_kelola_UMKM: Memilih opsi "Tambah UMKM"
activate Halaman_kelola_UMKM
Halaman_kelola_UMKM --> Pengguna: Menampilkan form pendaftaran UMKM
deactivate Halaman_kelola_UMKM

Pengguna -> Halaman_kelola_UMKM: Mengisi data form & klik "Simpan"
activate Halaman_kelola_UMKM

Halaman_kelola_UMKM -> Controller: Meneruskan data UMKM baru
activate Controller

Controller -> Entity: Panggil fungsi validasi(data_umkm)
activate Entity
Entity -> Entity: Melakukan validasi data form
Entity --> Controller: Mengembalikan hasil validasi (valid / tidak valid)
deactivate Entity

alt Data Valid
    Controller -> Entity: Panggil fungsi simpanDataUMKM(data_umkm)
    activate Entity
    Entity -> Entity: Menyimpan data UMKM baru ke database
    Entity --> Controller: Konfirmasi data telah disimpan
    deactivate Entity
    
    Controller --> Halaman_kelola_UMKM: Respon sukses
    deactivate Controller
    
    Halaman_kelola_UMKM --> Pengguna: Menampilkan notifikasi "Data UMKM berhasil ditambahkan"
    deactivate Halaman_kelola_UMKM
else Data Tidak Valid
    Controller --> Halaman_kelola_UMKM: Respon gagal dengan pesan error validasi
    deactivate Controller
    
    Halaman_kelola_UMKM --> Pengguna: Menampilkan pesan error di form
    deactivate Halaman_kelola_UMKM
end

@enduml
