@startuml
!theme materia

title Sequence Diagram - Menampilkan Laporan (Pola MVC)
hide footbox

actor "Pengguna Sistem" as Pengguna
boundary "Halaman_Laporan" as Halaman_Laporan
control "Controller" as Controller
entity "Entity" as Entity

Pengguna -> Halaman_Laporan: Membuka menu/halaman "Laporan"
activate Halaman_Laporan
Halaman_Laporan --> Pengguna: Menampilkan opsi jenis laporan & filter
deactivate Halaman_Laporan

Pengguna -> Halaman_Laporan: Memilih jenis laporan & mengisi parameter/filter
activate Halaman_Laporan

Halaman_Laporan -> Controller: Minta generate laporan (dengan parameter)
activate Controller

Controller -> Entity: Panggil fungsi getLaporanData(parameter)
activate Entity
Entity -> Entity: Mengumpulkan & memproses data dari database
Entity --> Controller: Mengembalikan data laporan yang sudah jadi
deactivate Entity

Controller --> Halaman_Laporan: Meneruskan data laporan
deactivate Controller

Halaman_Laporan --> Pengguna: Menampilkan hasil laporan di layar & opsi ekspor
deactivate Halaman_Laporan

alt Ingin mengunduh laporan
    Pengguna -> Halaman_Laporan: Klik tombol "Unduh" / "Ekspor"
    activate Halaman_Laporan
    
    Halaman_Laporan -> Controller: Minta ekspor laporan (data yang sama)
    activate Controller
    
    Controller -> Controller: Membuat file laporan (misal: PDF, Excel)
    Controller --> Halaman_Laporan: Mengirim file yang telah digenerate
    deactivate Controller
    
    Halaman_Laporan --> Pengguna: Menyediakan file laporan untuk diunduh
    deactivate Halaman_Laporan
end

@enduml
